\section{Controle Modular Local}

\begin{frame}{Metodologia Utilizada}

    \Large \textbf{Controle Modular Local:}
    \normalsize

    \vspace{2mm}

    
Dividir para conquistar! Assumindo que a modelagem das plantas já tenha sido obtida, os passos necessários para aplicação do Controle Modular Local podem ser sintetizados como segue
    

    \begin{itemize}
        \item \textbf{1º:} Definição de plantas assíncronas.
        \item \textbf{2º:} Composição paralela das subplantas assíncronas.
        \item \textbf{3º:} Aplicação do comportamento especificado para cada subsistema.
    \end{itemize}

\end{frame}

\begin{frame}{Metodologia Utilizada}

    \begin{itemize}
        \item \textbf{Definição do plano de ação para subplantas e restrições respectivas:}
    \end{itemize}

    \begin{figure}[htbp]
        \centering
        \resizebox{0.53\textwidth}{!}{\input{tikz/restricoes/Metodologia.tex}}
        \caption{Subplantas e suas respectivas restrições.}
        \label{fig:SFXSs} 
    \end{figure}


\end{frame}

\begin{frame}{Definição de plantas assíncronas.}

    \begin{itemize}
        \item \textbf{Individualização de cada componente} 
    \end{itemize}

    

    \begin{figure}[htbp]
        \centering
        \resizebox{0.4\textwidth}{!}{\input{tikz/modelo/modeloSemCaminhos.tex}}
        \caption{Planta para a máquina de \textit{milkshake}.}
        \label{fig:sistema}
    \end{figure}
    

\end{frame}


\begin{frame}{Composição paralela das subplantas assíncronas.}

    \begin{itemize}
        \item \textbf{Modelagem individual de cada componente;} 
    \end{itemize}

    Plantas com restrições individuais

    \begin{itemize}
        \item \textit{Processing Machine 1}
        \item \textit{Processing Machine 2}
    \end{itemize}

    Ambas restrições são independentes, e ligeiramente diferentes, e comandam o \textbf{ciclo de funcionamento} das \textit{Processing Machines}, que trabalham de forma autônoma ao resto do sistema executam suas respectivas ações - de enchimento com \textit{milkshake} e cobertura - uma vez que o sensor acuse a chegada do copo.


\end{frame}

\begin{frame}{\textit{Processing Machine} (PM1).}

    Restricão para a subplanta composta apenas da \textit{Processing Machine 1}.

    \begin{figure}[htbp]
        \centering
        \resizebox{0.7\textwidth}{!}{\input{tikz/restricoes/H_PM1.tex}}
        \caption{Restrição para PM1.}
        \label{fig:H_PM1}
    \end{figure}

\end{frame}

\begin{frame}{\textit{Processing Machine} (PM2).}

    Restricão para a subplanta composta apenas da \textit{Processing Machine 2}.

    \begin{figure}[htbp]
        \centering
        \resizebox{0.8\textwidth}{!}{\input{tikz/restricoes/H_PM2.tex}}
        \caption{Restrição para PM2.}
        \label{fig:H_PM2}
    \end{figure}


\end{frame}


\begin{frame}{Aplicação do comportamento especificado para cada subsistema.}

    \begin{itemize}
        \item \textbf{Componentes em si não requerem restrições individuais, com exceção da processing machine;} 
        \item \textbf{Utilização de restrições que garantem a interação correta entre diferentes subplantas, garantindo o funcionamento correto.} 
    \end{itemize}

    Subsistemas que requerem restrições:
    \begin{itemize}
        \item \textit{Rotatory Table} e \textit{Processing Machine 1};
        \item \textit{Stack Feeder} e \textit{Exit Slides};
        \item \textit{Rotatory Table} e \textit{Distribution System}.
    \end{itemize}

    

\end{frame}

\begin{frame}{Subplanta \textit{Stack Feeder} (SF) e \textit{Exit Slides} (XSs).}

    Essa restrição é feita para a subplanta contendo \textit{Stack Feeder} e o paralelo entre as duas saídas \textit{Exit Slide}. Tem como objetivo de \textbf{evitar congestionamento} do sistema.

    \begin{figure}[htbp]
        \centering
        \resizebox{0.4\textwidth}{!}{\input{tikz/restricoes/H_SF_XSs.tex}}
        \caption{Restrição para SF e XSs.}
        \label{fig:SFXSs}
    \end{figure}
    
\end{frame}

\begin{frame}{Subplanta \textit{Rotatory Table} (RB) e \textit{Processing Machine 1} (PM1).}

    A restrição entre a subplanta contendo \textit{Rotatory Table} e a \textit{Processing Machine 1} e realizada como o paralelo entre duas restrições mais simples.

    \begin{figure}[htbp]
        \centering
        \resizebox{0.7\textwidth}{!}{\input{tikz/restricoes/H_RB_PM1_1.tex}}
        \caption{\textbf{Primeira} restrição para RB e PM1 (controle da inversão do sentido da esteira de RB).}
        \label{fig:SFXSs} 
    \end{figure}
    
\end{frame}

\begin{frame}{Subplanta \textit{Rotatory Table} (RB) e \textit{Processing Machine 1} (PM1).}

    \begin{figure}[htbp]
        \centering
        \resizebox{0.75\textwidth}{!}{\input{tikz/restricoes/H_RB_PM1_2.tex}}
        \caption{\textbf{Segunda} restrição para RB e PM1 (controle da ordem de funcionamento da esteira de PM1).}
        \label{fig:SFXSs} 
    \end{figure}
    
\end{frame}

\begin{frame}{Subplanta \textit{Rotatory Table} (RB) e \textit{Distribution System} (DS).}

    Essa restrição é feita para a subplanta contendo \textit{Rotatory Table} e o \textit{Distribution System}.

    \begin{figure}[htbp]
        \centering
        \resizebox{0.8\textwidth}{!}{\input{tikz/restricoes/H_RB_DS.tex}}
        \caption{Restrição para RB e DS.}
        \label{fig:SFXSs} 
    \end{figure}
    
\end{frame}

\begin{frame}{Cálculo do Controle Modular Local.}

    Fazendo-se a composição paralela dos componentes, obtém-se uma planta local, e sua correspondente especificação. Formalmente, a planta local $G_j^l$ é definida como:

    \begin{equation}
        G_j^l=\|_j^l \mid i \in\left\{1, \ldots, n^{\prime}\right\}, E_i^{\prime} \cap E_j \neq \emptyset
    \end{equation}

    Além disso, dadas as especificidades da ferramenta DESTool, a saber, de que o cálculo do supervisório é realizado por meio de produtos, faz-se a extração do alfabeto com a função \texttt{AlphabetExtract} e aplica-se a função \texttt{InvProject} nas respectivas restrições $H_{s,j}$, gerando $^{full}H_{s,j}$.

     
    
\end{frame}

\begin{frame}{Cálculo do Controle Modular Local.}

    Enfim, calcula-se o supervisório $R_j = sup C\left(\mathcal{L}_m(H_j)\right)$ para as combinações de subplantas e respectivas restricções. Sendo $H_j = ^{full}H_{s,j} \| G_j^l$. A função \texttt{SupConNB} realiza esse passo para os dados sistemas.

    Para finalizar, para garantir que o sistema é não bloqueante deve-se verificar como verdade a igualdade a seguir sobre a composição paralela dos controles supervisórios.


    \begin{equation}
        \|_{j=1}^m R_j=\operatorname{Trim}\left(\|_{j=1}^m R_j\right)
    \end{equation}

    Utilizando a ferramenta DESTool, basta utilizar a função \texttt{isNoNblocking}.
    
\end{frame}